<!DOCTYPE html>
<html lang="bg">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>СУ "Петко Р. Славейков" - Екип</title>

  <meta name="description" content="Педагогически и административен екип на СУ 'П. Р. Славейков', гр. Кричим.">
  <meta property="og:title" content='СУ "Петко Р. Славейков" – Екип'>
  <meta property="og:description" content="Запознайте се с нашите учители и ръководство.">
  <meta property="og:type" content="website">
  <meta property="og:image" content="images/hero-1.jpg">
  <meta name="theme-color" content="#2d4ea1">
  <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>

  <link rel="stylesheet" href="style.css">
  <link href="https://fonts.googleapis.com/css2?family=Poppins:wght@400;600&display=swap" rel="stylesheet">
  <link rel="icon" type="image/png" href="favicon.png">
</head>
<body>
<header>
  <div class="logo">
    <img src="logo.png" alt="Лого на училището" loading="lazy" decoding="async">
    <div>
      <h1>СУ "Петко Р. Славейков"</h1>
      <p>гр. Кричим</p>
    </div>
    <button class="burger" aria-label="Отвори основното меню" aria-controls="nav-links" aria-expanded="false" onclick="toggleMenu(this)">
      <span></span><span></span><span></span>
    </button>
  </div>
  <nav>
    <ul id="nav-links">
      <li><a href="index.html">Начало</a></li>
      <li><a href="priem.html">Прием</a></li>
      <li><a href="dokumenti.html">Документи</a></li>
      <li><a href="novini.html">Новини</a></li>
      <li><a href="ekip.html">Екип</a></li>
      <li><a href="subitiya.html">Събития</a></li>
      <li><a href="galeriya.html">Галерия</a></li>
      <li><a href="kontakt.html">Контакти</a></li>
    </ul>
  </nav>
</header>

<section>
  <h2>Екип</h2>
  <div class="card team-search-box">
  <div class="team-filters">
    <input id="team-search" class="input" type="search" placeholder="Търси по име или роля…">
    <div class="filter-chips" role="tablist" aria-label="Филтри по етап">
      <button class="chip active" data-stage="" aria-pressed="true">Всички</button>
      <button class="chip" data-stage="rkovodstvo" aria-pressed="false">Ръководство</button>
      <button class="chip" data-stage="nachalen" aria-pressed="false">Начален етап (I–IV)</button>
      <button class="chip" data-stage="gimn" aria-pressed="false">Гимназиален етап (V–XII)</button>
      <button class="chip" data-stage="psuvet" aria-pressed="false">Педагогически съвет</button>
    </div>
  </div>
</div>



  <p>Запознайте се с нашия екип по етапи и роли.</p>

  <!-- Ръководство -->
  <h3 class="team-section-title">Ръководство</h3>
  <div class="teacher-grid">
    <article class="teacher-card" data-stage="rkovodstvo">
      <div class="teacher-photo">
        <img src="images/male.png" alt="Иван Иванов" loading="lazy">
      </div>
      <div class="teacher-body">
        <h3 class="teacher-name">Иван Иванов</h3>
        <p class="teacher-role">Директор</p>
        <div class="teacher-meta">
          <a href="mailto:ivan.ivanov@example.bg">ivan.ivanov@example.bg</a>
        </div>
      </div>
    </article>
    <article class="teacher-card" data-stage="rkovodstvo">
      <div class="teacher-photo">
        <img src="images/female.png" alt="Мария Георгиева" loading="lazy">
      </div>
      <div class="teacher-body">
        <h3 class="teacher-name">Мария Георгиева</h3>
        <p class="teacher-role">Заместник-директор</p>
        <div class="teacher-meta">
          <a href="mailto:m.georgieva@example.bg">m.georgieva@example.bg</a>
        </div>
      </div>
    </article>
  </div>

  <!-- Начален етап -->
  <h3 class="team-section-title">Начален етап (I–IV)</h3>
  <div class="teacher-grid">
    <article class="teacher-card" data-stage="nachalen">
      <div class="teacher-photo">
        <img src="images/female.png" alt="Мария Петрова" loading="lazy">
      </div>
      <div class="teacher-body">
        <h3 class="teacher-name">Мария Петрова</h3>
        <p class="teacher-role">Начален учител</p>
        <div class="teacher-meta">
          <a href="mailto:m.petrova@example.bg">m.petrova@example.bg</a>
        </div>
      </div>
    </article>
    <article class="teacher-card" data-stage="nachalen">
      <div class="teacher-photo">
        <img src="images/female.png" alt="Ирина Стефанова" loading="lazy">
      </div>
      <div class="teacher-body">
        <h3 class="teacher-name">Ирина Стефанова</h3>
        <p class="teacher-role">Начален учител</p>
        <div class="teacher-meta">
          <a href="mailto:i.stefanova@example.bg">i.stefanova@example.bg</a>
        </div>
      </div>
    </article>
  </div>

  <!-- Гимназиален етап -->
  <h3 class="team-section-title">Гимназиален етап (V–XII)</h3>
  <div class="teacher-grid">
    <article class="teacher-card" data-stage="gimn">
      <div class="teacher-photo">
        <img src="images/male.png" alt="Георги Димитров" loading="lazy">
      </div>
      <div class="teacher-body">
        <h3 class="teacher-name">Георги Димитров</h3>
        <p class="teacher-role">Учител по математика</p>
        <div class="teacher-meta">
          <a href="mailto:g.dimitrov@example.bg">g.dimitrov@example.bg</a>
        </div>
      </div>
    </article>
    <article class="teacher-card" data-stage="gimn">
      <div class="teacher-photo">
        <img src="images/female.png" alt="Елена Стоянова" loading="lazy">
      </div>
      <div class="teacher-body">
        <h3 class="teacher-name">Елена Стоянова</h3>
        <p class="teacher-role">Учител по информатика и ИТ</p>
        <div class="teacher-meta">
          <a href="mailto:e.stoyanova@example.bg">e.stoyanova@example.bg</a>
        </div>
      </div>
    </article>
    <article class="teacher-card" data-stage="gimn">
      <div class="teacher-photo">
        <img src="images/female.png" alt="Надежда Колева" loading="lazy">
      </div>
      <div class="teacher-body">
        <h3 class="teacher-name">Надежда Колева</h3>
        <p class="teacher-role">Учител по английски език</p>
        <div class="teacher-meta">
          <a href="mailto:n.koleva@example.bg">n.koleva@example.bg</a>
        </div>
      </div>
    </article>
  </div>

  <!-- Педагогически съвет -->
  <h3 class="team-section-title">Педагогически съвет</h3>
  <div class="teacher-grid">
    <article class="teacher-card" data-stage="psuvet">
      <div class="teacher-photo">
        <img src="images/male.png" alt="Петър Колев" loading="lazy">
      </div>
      <div class="teacher-body">
        <h3 class="teacher-name">Петър Колев</h3>
        <p class="teacher-role">Системен администратор</p>
        <div class="teacher-meta">
          <a href="mailto:p.kolev@example.bg">p.kolev@example.bg</a>
        </div>
      </div>
    </article>
    <article class="teacher-card" data-stage="psuvet">
      <div class="teacher-photo">
        <img src="images/female.png" alt="Виолета Маринова" loading="lazy">
      </div>
      <div class="teacher-body">
        <h3 class="teacher-name">Виолета Маринова</h3>
        <p class="teacher-role">Психолог</p>
        <div class="teacher-meta">
          <a href="mailto:v.marinova@example.bg">v.marinova@example.bg</a>
        </div>
      </div>
    </article>
  </div>
</section>

<footer>
  <p>&copy; 2025 СУ "Петко Р. Славейков", гр. Кричим. Всички права запазени.</p>
</footer>

<script src="script.js"></script>
<script>
(async function(){
  // 1) От къде четем CSV
  const CSV_URL = 'data/teachers.csv'; // смени ако е друг път/линк

  // 2) Контейнери на секциите
  const grids = {
    rkovodstvo: document.querySelector('h3.team-section-title:nth-of-type(1) + .teacher-grid'),
    nachalen:   document.querySelector('h3.team-section-title:nth-of-type(2) + .teacher-grid'),
    gimn:       document.querySelector('h3.team-section-title:nth-of-type(3) + .teacher-grid'),
    psuvet:     document.querySelector('h3.team-section-title:nth-of-type(4) + .teacher-grid'),
  };

  // 3) Плейсхолдър за снимка
  const placeholder = 'images/team/placeholder.jpg';

  // 4) Лек CSV парсер (без библиотеки)
  function parseCSV(text){
    const lines = text.trim().split(/\r?\n/);
    const header = lines.shift().split(',').map(h => h.trim());
    return lines.map(line=>{
      // проста, но надеждна разбивка: разделител „,“ и уважава кавички
      const cols = [];
      let cur = '', inQ = false;
      for (let i=0;i<line.length;i++){
        const ch = line[i];
        if (ch === '"' ) {
          if (inQ && line[i+1] === '"') { cur+='"'; i++; }
          else inQ = !inQ;
        } else if (ch === ',' && !inQ){
          cols.push(cur); cur='';
        } else {
          cur += ch;
        }
      }
      cols.push(cur);
      const obj = {};
      header.forEach((h,idx)=> obj[h] = (cols[idx]||'').trim());
      return obj;
    });
  }

  // 5) Рендер на карта
  function cardHTML(t){
    const photo = t.photo || placeholder;
    const subject = t.subject ? `<div class="teacher-subject">${t.subject}</div>` : '';
    const email = t.email ? `<a href="mailto:${t.email}">${t.email}</a>` : '';
    return `
      <article class="teacher-card" data-stage="${t.stage}">
        <div class="teacher-photo">
          <img src="${photo}" alt="${t.name}" loading="lazy">
        </div>
        <div class="teacher-body">
          <h3 class="teacher-name">${t.name}</h3>
          <p class="teacher-role">${t.role||''}</p>
          ${subject}
          <div class="teacher-meta">${email}</div>
        </div>
      </article>
    `;
  }

  try{
    const res = await fetch(CSV_URL, { cache: 'no-store' });
    if (!res.ok) throw new Error('Не може да се зареди CSV: ' + res.status);
    const text = await res.text();
    const rows = parseCSV(text);

    // Сортираме по stage и order (ако има)
    rows.sort((a,b)=>{
      const s = (a.stage||'').localeCompare(b.stage||'');
      if (s!==0) return s;
      const oa = parseInt(a.order||'999',10), ob = parseInt(b.order||'999',10);
      return oa - ob;
    });

    // Чистим текущото съдържание (по желание)
    Object.values(grids).forEach(g=> g && (g.innerHTML = ''));

    // Пълним секциите
    rows.forEach(t=>{
      const g = grids[t.stage];
      if (!g) return;
      g.insertAdjacentHTML('beforeend', cardHTML(t));
    });
  } catch(err){
    console.error(err);
  }
})();
</script>

</body>
</html>
